!function(e){function t(t){for(var n,s,i=t[0],d=t[1],c=t[2],u=0,f=[];u<i.length;u++)s=i[u],o[s]&&f.push(o[s][0]),o[s]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(e[n]=d[n]);for(l&&l(t);f.length;)f.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var d=a[i];0!==o[d]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},o={0:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],d=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=d;r.push([7,1]),a()}([,function(e,t){e.exports=jQuery},function(e,t){e.exports=GravAdmin},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(13),r=(n=o)&&n.__esModule?n:{default:n};r.default.options.positionClass="toast-top-right",r.default.options.preventDuplicates=!0,t.default=r.default},function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(1)),o=r(a(6));function r(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)("#offline-status");(0,n.default)(window).on("offline",function(){s.slideDown()}),(0,n.default)(window).on("online",function(){s.slideUp()}),(0,n.default)(document).ready(function(){o.default||s.slideDown()}),t.default=void 0===e.navigator.onLine||e.navigator.onLine}).call(this,a(0))},function(e,t,a){"use strict";a(8)},function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(9)),o=d(a(10)),r=d(a(5)),s=a(2),i=d(a(1));function d(e){return e&&e.__esModule?e:{default:e}}var c=(0,i.default)('[data-remodal-id="wizard"]'),l=(0,i.default)('[data-remodal-id="reset-local"]'),u={github:"github.com",bitbucket:"bitbucket.org",gitlab:"gitlab.com",allothers:"allothers.repo"},f={REPO_URL:"https://{placeholder}/getgrav/grav.git"},p=function(){var e=c.remodal({closeOnConfirm:!1}),t=c.find('[data-gitsync-action="previous"]'),a=c.find('[data-gitsync-action="next"]'),n=c.find('[data-gitsync-action="save"]');h=0,c.find("form > [class^=step-]:not(.step-"+h+") > .panel").hide().removeClass("hidden"),c.find('form > [class="step-'+h+'"] > .panel').show(),a.removeClass("hidden"),t.addClass("hidden"),n.addClass("hidden");var o=(0,i.default)('[name="data[webhook]"]').val(),r=(0,i.default)('[name="data[webhook_secret]"]').val();(0,i.default)('[name="gitsync[repository]"]').trigger("change"),(0,i.default)('[name="gitsync[webhook]"]').val(o),(0,i.default)('[name="gitsync[webhook_secret]"]').val(r),(0,i.default)(".gitsync-webhook").text(o),e.open()},h=0,v=0,g=null;(0,i.default)(document).on("closed",c,function(e){h=0}),(0,i.default)(document).on("click","[data-gitsync-useraction]",function(e){e.preventDefault();var t=(0,i.default)(e.target).closest("[data-gitsync-useraction]"),a=t.data("gitsyncUseraction"),n=s.config.current_url+".json";switch(a){case"wizard":p();break;case"sync":var r=t.data("gitsync-uri");t.find("i").removeClass("fa-cloud fa-git").addClass("fa-circle-o-notch fa-spin"),(0,o.default)(r||n,{method:"post",body:{task:"synchronize"}},function(){t.find("i").removeClass("fa-circle-o-notch fa-spin").addClass(r?"fa-git":"fa-cloud")});break;case"reset":var d=l.remodal({closeOnConfirm:!1});d.open(),l.data("_reset_event_set_")||l.find('[data-gitsync-action="reset-local"]').one("click",function(){d.close(),l.data("_reset_event_set_",!0),t.find("i").removeClass("fa-history").addClass("fa-circle-o-notch fa-spin"),(0,o.default)(n,{method:"post",body:{task:"resetlocal"}},function(){l.data("_reset_event_set_",!1),t.find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-history")})})}}),(0,i.default)(document).on("click","[data-gitsync-action]",function(t){t.preventDefault();var a=(0,i.default)(t.target).closest("[data-gitsync-action]"),n=c.find('[data-gitsync-action="previous"]'),d=c.find('[data-gitsync-action="next"]'),l=c.find('[data-gitsync-action="save"]'),u=a.data("gitsyncAction"),f=(0,i.default)('[name="gitsync[repo_user]"]').val(),p=(0,i.default)('[name="gitsync[repo_password]"]').val(),g=(0,i.default)('[name="gitsync[repo_url]"]').val(),m=(0,i.default)('[name="gitsync[webhook]"]').val(),b=(0,i.default)('[name="gitsync[webhook_enabled]"]').is(":checked"),y=(0,i.default)('[name="gitsync[webhook_secret]"]').val(),k=[];if(f||k.push("Username is missing."),g||k.push("Repository is missing."),["save","test"].includes(u)&&k.length)return r.default.error(k.join("<br />")),!1;if("save"===u){var _=(0,i.default)('[name="gitsync[folders]"]:checked').map(function(e,t){return t.value});(0,i.default)('[name="data[repository]"]').val(g),(0,i.default)('[name="data[user]"]').val(f),(0,i.default)('[name="data[password]"]').val(p),(0,i.default)('[name="data[webhook]"]').val(m),(0,i.default)('[name="data[webhook_enabled]"][value="'+(b?1:0)+'"]').prop("checked",!0),(0,i.default)('[name="data[webhook_secret]"]').val(y);var w=(0,i.default)('[name="data[folders][]"]');return w&&w[0]&&w[0].selectize&&w[0].selectize.setValue(_.toArray()),(0,i.default)('[name="task"][value="save"]').trigger("click"),!1}if("test"===u){var C=s.config.current_url+".json",O=e.btoa(JSON.stringify({user:f,password:p,repository:g}));return(0,o.default)(C,{method:"post",body:{test:O,task:"testConnection"}}),!1}c.find(".step-"+h+" > .panel").slideUp(),h+="next"===u?1:-1,c.find(".step-"+h+" > .panel").slideDown(),l.addClass("hidden"),"next"===u&&n.removeClass("hidden"),h<=0&&n.addClass("hidden"),h>0&&d.removeClass("hidden"),h===v&&(d.addClass("hidden"),n.removeClass("hidden"),l.removeClass("hidden"))}),(0,i.default)(document).on("keyup",'[data-gitsync-uribase] [name="gitsync[webhook]"]',function(e){var t=(0,i.default)(e.currentTarget).val();(0,i.default)(".gitsync-webhook").text(t)}),(0,i.default)(document).on("keyup",'[data-gitsync-uribase] [name="gitsync[webhook_secret]"]',function(e){(0,i.default)('[data-gitsync-uribase] [name="gitsync[webhook_enabled]"]').trigger("change")}),(0,i.default)(document).on("change",'[data-gitsync-uribase] [name="gitsync[webhook_enabled]"]',function(e){var t=(0,i.default)(e.currentTarget),a=t.is(":checked"),n=(0,i.default)('[name="gitsync[webhook_secret]"]').val();t.closest(".webhook-secret-wrapper").find("label:last-child")[a?"removeClass":"addClass"]("hidden"),(0,i.default)(".gitsync-webhook-secret").html(a&&n.length?"<code>"+n+"</code>":"<em>leave empty</em>")}),(0,i.default)(document).on("change",'[name="gitsync[repository]"]',function(e){var t=(0,i.default)(e.target);t.is(":checked")&&(g=t.val(),Object.keys(u).forEach(function(e){c.find(".hidden-step-"+e)[e===g?"removeClass":"addClass"]("hidden"),e===g&&(c.find(".webhook-secret-wrapper")["bitbucket"===e?"addClass":"removeClass"]("hidden"),c.find('input[name="gitsync[repo_url]"][placeholder]').attr("placeholder",f.REPO_URL.replace(/\{placeholder\}/,u[e])))}))}),(0,i.default)(document).on("click","[data-access-tokens-details]",function(e){e.preventDefault();var t=(0,i.default)(e.currentTarget),a=t.closest(".access-tokens").find(".access-tokens-details");a.slideToggle(250,function(){var e=a.is(":visible");t.find(".fa").removeClass("fa-chevron-down fa-chevron-up").addClass("fa-chevron-"+(e?"up":"down"))})}),(0,i.default)(document).on("mouseenter",'[data-remodal-id="wizard"] .step-4 label',function(e){var t=(0,i.default)(e.currentTarget),a=t.find("input").val(),n=t.closest(".columns").find(".column:last");n.find('[class*="description-"]').addClass("hidden"),n.find(".description-"+a).removeClass("hidden")}),(0,i.default)(document).ready(function(){v=c.find('[class^="step-"]').length-1,c.wrapInner("<form></form>"),l.wrapInner("<form></form>"),!n.default.first_time&&n.default.git_installed||p()}),t.default=n.default}).call(this,a(0))},function(e,t){e.exports=GitSync},function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(12),o=a(2),r=void 0;t.default=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};if("function"==typeof a&&(s=a,a={}),a.method&&"post"===a.method){var i=new FormData;a.body=Object.assign({"admin-nonce":o.config.admin_nonce},a.body||{}),Object.keys(a.body).map(function(e){return i.append(e,a.body[e])}),a.body=i}return a=Object.assign({credentials:"same-origin",headers:{Accept:"application/json"}},a),e(t,a).then(function(e){return r=e,e}).then(n.parseStatus).then(n.parseJSON).then(n.userFeedback).then(function(e){return s(e,r)}).catch(n.userFeedbackError)}}).call(this,a(11))},,function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.parseStatus=function(e){return e},t.parseJSON=function(e){return e.text().then(function(e){var t=e;try{t=JSON.parse(e)}catch(t){var a=document.createElement("div");a.innerHTML=e;var n=new Error;throw n.stack=(0,i.default)(a.innerText),n}return t})},t.userFeedback=function(e){if(c)return!0;var t=e.status||(e.error?"error":""),a=e.message||(e.error?e.error.message:null),n=e.toastr||null,i=void 0;switch(t){case"unauthenticated":throw document.location.href=s.config.base_url_relative,l("Logged out");case"unauthorized":t="error",a=a||"Unauthorized.";break;case"error":t="error",a=a||"Unknown error.";break;case"success":t="success",a=a||"";break;default:t="error",a=a||"Invalid AJAX response."}n&&(i=Object.assign({},o.default.options),Object.keys(n).forEach(function(e){o.default.options[e]=n[e]}));a&&(r.default||!r.default&&"error"!==t)&&o.default["success"===t?"success":"error"](a);n&&(o.default.options=i);return e},t.userFeedbackError=function(e){if(c)return!0;var t=e.stack?"<pre><code>"+e.stack+"</code></pre>":"";o.default.error("Fetch Failed: <br /> "+e.message+" "+t)};var n=d(a(1)),o=d(a(5)),r=d(a(6)),s=a(2),i=d(a(15));function d(e){return e&&e.__esModule?e:{default:e}}var c=!1,l=function(e){var t=new Error(e.statusText||e||"");return t.response=e,t};(0,n.default)(e).on("beforeunload._ajax",function(){c=!0})}).call(this,a(0))}]);